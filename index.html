<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trang Thông Tin Đơn Vị</title>  
  <link rel="stylesheet" href="./main.css">
</head>

<body>

  <!-- DIV nền -->
  <div id="background"></div>

  <header>
    <h1>Trang thông tin tuyên truyền Trung Đoàn 6, Bộ Chỉ Huy Quân Sự Thành phố Huế</h1>
    <button class="login-btn" onclick="window.location.href='login.html'">Đăng nhập quản lý</button>
  </header>

  
  <div class="container">
    <div class="dangKyTham">
      <h2>Đăng ký vào thăm quân nhân</h2>
      <form id="visitForm">
        <label>Họ tên khách:</label>
        <input type="text" id="hoten" placeholder="Nhập họ tên" />

        <label>Số CCCD:</label>
        <input type="text" id="cccd" placeholder="Nhập CCCD" />

        <label>Mối quan hệ:</label>
        <input type="text" id="quanhe" placeholder="Nhập quan hệ"  />

        <label>Tên quân nhân muốn thăm:</label>
        <input type="text" id="quannhan" placeholder="Nhập tên quân nhân"  />

        <label>Số điện thoại:</label>
        <input type="text" id="sdt" placeholder="Nhập số điện thoại" />

        <label>Tỉnh/Thành phố:</label>
        <select id="tinhthanh" >
          <option value="">-- Chọn tỉnh/thành phố --</option>
        </select>

        <label>Xã/Phường:</label>
        <select id="xahuyen">
          <option value="">-- Chọn xã/phường --</option>
        </select>
        <label>Đơn vị:</label>
        <input type="text" id="donvi" placeholder="Nhập đơn vị" />

        <label>Ngày giờ thăm:</label>
        <input type="datetime-local" id="ngaytham" />

        <button type="submit">Gửi đăng ký</button>
      </form>
    </div>
    <!-- Card Quy định thăm gặp -->
    <div class="info-quyDinh" id="qd">
      <div class="quyDinh card" style="height: 50%;">
        <h2>Quy định thăm gặp</h2>
        <ul>
          <li>Mang CCCD/định danh hợp lệ.</li>
          <li>Tuân thủ hướng dẫn của cán bộ trực.</li>
          <li>Không chụp ảnh tại khu vực cấm.</li>
        </ul>
      </div>
      <div class="check-container">
  <input type="text" id="searchCode" placeholder="Nhập mã kiểm tra..." />
  <button id="btnCheck" onclick="checkInfoStatus()">Kiểm tra</button>
</div>

<div class="dangKyThamThan-info" id="info-thamthan"></div>
    </div>
  </div>

  <section>
    <!-- Card Giới thiệu -->
    <div class="card" id="gth">
      <h2>Giới thiệu</h2>
      <p>Trung đoàn 6, thuộc Bộ Chỉ huy Quân sự tỉnh Thừa Thiên Huế, có tên truyền thống là “Đoàn Phú Xuân anh hùng”,
        được thành lập năm 1965. Trong kháng chiến chống Mỹ, đơn vị tham gia nhiều trận đánh lớn, đặc biệt là Chiến dịch
        Mậu Thân 1968 tại Huế. Sau giải phóng, Trung đoàn 6 tham gia huấn luyện, sẵn sàng chiến đấu, giúp dân xây dựng
        nông thôn mới và các hoạt động dân sinh. Đơn vị nhiều lần được tặng Huân chương Quân công và danh hiệu “Đơn vị
        Quyết thắng”, là biểu tượng tinh thần dũng cảm, kiên cường và phục vụ đất nước

        .</p>
    </div>

    <!-- Card Ảnh Đơn Vị -->
    <div class="card" id="anh">
      <h2>Ảnh Đơn Vị</h2>
      <div class="image-row">
        <div class="image-item">
          <img src="./imgs/anh1.jpg" alt="Ảnh 1">
          <p>Lao động giúp dân</p>
        </div>
        <div class="image-item">
          <img src="./imgs/anh2.jpg" alt="Ảnh 2">
          <p>Kiểm tra đánh thuốc nổ</p>
        </div>
        <div class="image-item">
          <img src="./imgs/anh3.jpg" alt="Ảnh 3">
          <p>Đồng hành cùng chiến sĩ</p>
        </div>
        <div class="image-item">
          <img src="./imgs/anh4.jpg" alt="Ảnh 4">
          <p>Mô hình bát nước thao trường</p>
        </div>
        <div class="image-item">
          <img src="./imgs/anh5.jpg" alt="Ảnh 5">
          <p>Công tác dân vận</p>
        </div>
        <div class="image-item">
          <img src="./imgs/anh6.jpg" alt="Ảnh 6">
          <p>Lễ tuyên thệ CSM</p>
        </div>
      </div>
    </div>
    </div>

  </section>
</body>
<script>
  const tinhSelect = document.getElementById("tinhthanh");
  const xaSelect = document.getElementById("xahuyen");

  fetch("https://34tinhthanh.com/api/provinces")
    .then(res => res.json())
    .then(provinces => {

      provinces.forEach(tinh => {
        const opt = document.createElement("option");
        opt.value = tinh.name;        // ✅ LƯU TÊN TỈNH
        opt.textContent = tinh.name; // hiển thị tên
        opt.dataset.code = tinh.province_code; // giữ code để dùng nội bộ
        tinhSelect.appendChild(opt);
      });

      tinhSelect.addEventListener("change", () => {
        xaSelect.innerHTML = '<option value="">-- Chọn xã/phường --</option>';

        const selectedOption = tinhSelect.selectedOptions[0];
        if (!selectedOption) return;

        const provinceCode = selectedOption.dataset.code; // lấy code từ dataset

        fetch(`https://34tinhthanh.com/api/wards?province_code=${provinceCode}`)
          .then(res => res.json())
          .then(wards => {
            wards.forEach(xa => {
              const opt = document.createElement("option");
              opt.value = xa.ward_name;      // ✅ tên xã
              opt.textContent = xa.ward_name;
              xaSelect.appendChild(opt);
            });
          });
      });
    })
    .catch(err => console.error("Lỗi tải tỉnh/thành:", err));
</script>

  <script src="./global.js"></script>
  <script src="./api.js"></script>
  <script src="./src.js"></script>

</html>
<!-- Popup -->
 <div id="popup" class="popup">
  <div class="popup-content">
    <h3>Thông báo</h3>

    <p id="popupMessage"></p>

    <p style="font-weight: bold; color: #0a7cff;">
      <span id="popupMessage-code"></span>
      <i id="codeText"></i>
    </p>

    <div style="display: flex; gap: 10px; justify-content: center;">
      <button id="btnCopy" onclick="copyCode()" class="popup-btn popup-btn-copy">
        Sao chép code
      </button>

      <button onclick="closePopup()" class="popup-btn popup-btn-close">
        Đóng
      </button>
    </div>
  </div>
</div>

